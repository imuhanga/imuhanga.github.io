<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhanga Ahokwiyandikisha - Client</title>
    <style>
*{margin:0;padding:0;box-sizing:border-box}pre{display:flex;flex-wrap:wrap}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background:#f5f5f5;min-height:100vh;color:#333;margin:0;padding:0}.container{max-width:800px;margin:0 auto;padding:20px}.header{text-align:center;background:#fff;padding:30px;margin-bottom:20px}.header h1{font-size:2.5rem;font-family:'BungeeFont',sans-serif;color:#343446;margin-bottom:10px;font-weight:700}.header p{font-family:'BungeeFont',sans-serif;color:#343a46;font-size:1.1rem}.main-content{background:#fff;border:1px solid #e0e0e0;padding:30px;margin-bottom:20px;min-height:400px}#messages{margin-bottom:20px}.loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}.spinner{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.recordbook-list{display:grid;gap:15px}.recordbook-item{background:#f8f9fa;border:1px solid #ccc;padding:20px;cursor:pointer;transition:background-color 0.3s ease;text-align:center}.recordbook-item:hover{background:#e8f4f8}.recordbook-name{font-size:1.2rem;font-weight:600;color:#2c3e50;margin-bottom:5px}.recordbook-meta{color:#7f8c8d;font-size:.9rem}.form-container{max-width:500px;margin:0 auto}.form-group{margin-bottom:20px}.form-label{display:block;margin-bottom:5px;font-weight:600;color:#2c3e50}.form-input,.form-textarea,.form-select{width:100%;padding:12px;border:1px solid #ccc;font-size:1rem;transition:border-color 0.3s ease}.form-input:focus,.form-textarea:focus,.form-select:focus{outline:none;border-color:#06c}.form-textarea{resize:vertical;min-height:100px}.checkbox-group{display:flex;align-items:center;gap:10px}.radio-group,.checkbox-group{flex-wrap:wrap}.radio-option,.checkbox-option{display:flex;align-items:center;gap:8px;margin-right:15px;margin-bottom:8px}.btn{padding:12px 24px;border:1px solid #ccc;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color 0.3s ease;text-decoration:none;display:inline-block;background:#fff;color:#333}.btn-primary{background:#06c;color:#fff;border-color:#06c}.btn-primary:hover{background:#049}.btn-secondary{background:#f5f5f5;color:#333;border-color:#ccc}.btn-secondary:hover{background:#e0e0e0}.btn:disabled{opacity:.6;cursor:not-allowed}.message{padding:15px;margin-bottom:20px;font-weight:500;border:1px solid}.message.success{background:#d4edda;color:#155724;border-color:#c3e6cb}.message.error{background:#f8d7da;color:#721c24;border-color:#f5c6cb}.message.warning{background:#fff3cd;color:#856404;border-color:#ffeaa7}.back-btn{margin-bottom:20px}.retry-btn{margin-top:20px}@media (max-width:768px){.container{padding:10px}.header{padding:20px}.header h1{font-size:2rem}.main-content{padding:20px}.recordbook-item{padding:15px}.btn{padding:10px 20px;font-size:.9rem}}@media (max-width:768px){.container{padding:15px}.header{padding:20px 15px}.header h1{font-size:2rem;line-height:1.3}.header p{font-size:1rem}.main-content{padding:20px 15px;margin-bottom:15px}.recordbook-item{padding:15px}.recordbook-name{font-size:1.1rem}.form-container{padding:0 10px}.form-group{margin-bottom:15px}.form-label{font-size:.95rem}.form-input,.form-textarea,.form-select{padding:10px;font-size:.95rem}.btn{padding:10px 20px;font-size:.95rem}.btn-primary,.btn-secondary{width:100%;margin-bottom:10px}.back-btn{margin-bottom:15px;padding:8px 16px}.retry-btn{margin-top:15px;padding:10px 20px}h2{font-size:1.5rem;margin-bottom:15px}.loading{padding:30px 15px}.spinner{width:40px;height:40px}pre{font-size:.9rem;line-height:1.4;white-space:pre-wrap;word-wrap:break-word}}@media (max-width:480px){.container{padding:10px}.header{padding:15px 10px}.header h1{font-size:1.7rem}.header p{font-size:.9rem}.main-content{padding:15px 10px;margin-bottom:10px}.recordbook-item{padding:12px}.recordbook-name{font-size:1rem}.recordbook-meta{font-size:.85rem}.form-input,.form-textarea,.form-select{padding:8px;font-size:.9rem}.btn{padding:8px 16px;font-size:.9rem}.message{padding:10px;font-size:.9rem}.radio-option,.checkbox-option{margin-right:10px;margin-bottom:5px;font-size:.9rem}.radio-group,.checkbox-group{flex-direction:column;align-items:flex-start;gap:5px}h2{font-size:1.3rem}pre{font-size:.85rem}}@media (min-width:769px) and (max-width:1024px){.container{max-width:90%;padding:20px}.form-input,.form-textarea,.form-select{padding:11px}.btn{padding:11px 22px}}@media (hover:none) and (pointer:coarse){.form-input,.form-textarea,.form-select,.btn,.recordbook-item{min-height:44px}.radio-option input[type="radio"],.checkbox-option input[type="checkbox"]{transform:scale(1.2);margin-right:8px}}@media (max-width:768px){input,select,textarea{font-size:16px!important}}@media (max-width:360px){.container{padding:8px}.main-content{padding:12px 8px}.form-input,.form-textarea,.form-select{padding:6px}.btn{padding:6px 12px}}
    </style>
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>Muhanga</h1>
            <p>Record Managment System</p>
        </div>

        <!-- Form Section -->
        <div class="main-content">
            <div id="content"></div>
        </div>

        <!-- Messages Section -->
        <div id="messages"></div>
    </div>

    <script>
      const _0xf5dc68=_0x57a5;function _0x57a5(e,o){return e-=469,_0x47f0()[e]}function _0x47f0(){const e=["type",'<option value="',"collections",'\n                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;"><pre>Hitamo aho Wiyandikisha</pre></h2>\n                \n                <div class="recordbook-list">\n                    <pre>Mbere yo guhitamo banza ubaze umuyobozi wawe!</pre>\n                    ','\')">\n                            <div class="recordbook-name">',"map","\n                            </select>\n                        </div>","795MZFflb","addEventListener","fields",'\n                <div class="loading">\n                    <button class="btn btn-primary retry-btn" onclick="window.location.reload()">Ongera ugerageze</button>\n                </div>\n            ','\n                        <input type="text" class="form-input" name="',"false","25566WwAywd","location","</span>\n                                    </label>\n                                ","name","</span>\n                        </div>\n                    </div>","337896CxhRfz",'\n                        <textarea class="form-textarea" name="','<div class="message ',"find","checked",'\n                                    <label class="radio-option">\n                                        <input type="radio" name="',">\n                                        <span>","success","</option>\n                                ","join","1373802nkhzgK",'\n                <button class="btn btn-secondary back-btn" onclick="goBack()">← <pre>Hitamo aho kwiyandikisha</pre></button>\n            ',"</p>\n                </div>\n            ",'\n                <div class="loading">\n                    <div class="spinner"></div>\n                    <p>',"Mwihangane systeme irafunze!",'</div>\n                            <div class="recordbook-meta" </pre>Kanda hano kwiyandikisha</pre></div>\n                        </div>\n                    ','\n                    <button class="btn btn-primary retry-btn" onclick="loadRecordbooks()">Ongera ushake</button>\n                </div>\n            ',">\n                    </div>","loading","form","/client/insert/","Error submitting record:","Ububiko ntibubonetse!","</option>","1727374TovZaK","checkbox",'\n                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">',"target","replace","field_name","POST","textarea",'" value="true" ',"Hari ikitagenze neza mwongere mugerageze","closed","DOMContentLoaded","select","</label>","\n                \n            ",'\n                            <select class="form-select" name="',"keys","application/json","radio","recordForm","49gjSckA",'" placeholder="Andika ',"Amakuru yabitswe!","get","value","trim","\n                            </div>\n                        </div>",'input[type="checkbox"]',"input_type",'\n                        <div class="recordbook-item" onclick="selectRecordbook(\'','\n                            <div class="radio-group">\n                                ',"entries","preventDefault",'</h2>\n                <pre>Uzuza neza ibisabwa ahantu ubona *</pre><br>\n                <form id="recordForm" class="form-container">\n                    ',"forEach","date",'"][value="','" value="',"hash","17920tbUshg","collection_name",' <span style="color: #e74c3c;">*</span>',"Mutegereza gatoya...","4878jWtsUE","message","required","getElementById","data_if_isselect","status","stringify","content","/client/attributes","HTTP ","1364688LzyIid","Tegereza gato...","toLowerCase",'">Ongera ugerageze</button>\n                </div>\n            ',"error","242764UKpNzP",'[name="','<div class="form-group">\n                <label class="form-label">',"innerHTML","querySelector","true","reload","Mwongere mugerageze mukanya","length",'</h2>\n                <pre>Uzuza neza ibisabwa ahantu ubona * nuko aba aringombwa kuhuzuza.</pre><br>\n                <form id="recordForm" class="form-container">\n                    ','" class="form-input" name="','\n                        <input type="date" class="form-input" name="',"submit","Error loading recordbooks:"];return(_0x47f0=function(){return e})()}!function(e,o){const n=_0x57a5,t=_0x47f0();for(;;)try{if(848943==parseInt(n(522))/1+-parseInt(n(578))/2+parseInt(n(564))/3+-parseInt(n(517))/4+parseInt(n(543))/5*(parseInt(n(549))/6)+parseInt(n(484))/7*(-parseInt(n(554))/8)+parseInt(n(507))/9*(parseInt(n(503))/10))break;t.push(t.shift())}catch(e){t.push(t.shift())}}();const API_BASE="https://mycdar-backend.vercel.app/api";let currentState=_0xf5dc68(572),recordbooks=[],selectedRecordbook=null;const contentEl=document[_0xf5dc68(510)](_0xf5dc68(514)),messagesEl=document[_0xf5dc68(510)]("messages");async function loadRecordbooksForSelfMode(e){const o=_0xf5dc68;messagesEl[o(525)]="",currentState=o(572),showLoading(o(506));try{const n=await fetchWithRetry(API_BASE+o(515));if(n[o(512)]){recordbooks=n[o(538)];const t=recordbooks[o(557)]((n=>n[o(504)]===e));t?(selectedRecordbook=t,showSelfModeForm()):(currentState=o(474),showSystemClosed())}else currentState=o(521),showMessage(o(521),n[o(508)]||o(529)),showErrorRetry((()=>loadRecordbooksForSelfMode(e)))}catch(n){console[o(521)](o(535),n),currentState="error",showMessage("error",o(473)),showErrorRetry((()=>loadRecordbooksForSelfMode(e)))}}async function loadRecordbooksWithHash(e){const o=_0xf5dc68;messagesEl[o(525)]="",currentState=o(572),showLoading("Mutegereza gatoya...");try{const n=await fetchWithRetry(API_BASE+o(515));if(n[o(512)]){recordbooks=n[o(538)];const t=recordbooks[o(557)]((n=>n.collection_name[o(519)]()===e.toLowerCase()));t?(selectedRecordbook=t,showForm()):(showErrorRetry(),showMessage("warning",o(568)))}else currentState=o(521),showMessage(o(521),n[o(508)]||"Mwongere mugerageze mukanya"),showErrorRetry((()=>loadRecordbooksWithHash(e)))}catch(n){console.error("Error loading recordbooks:",n),currentState="error",showMessage(o(521),o(473)),showErrorRetry((()=>loadRecordbooksWithHash(e)))}}function showSelfModeForm(e=!1){const o=_0xf5dc68;currentState=o(573);const n=selectedRecordbook.fields;if(e)return contentEl.innerHTML='\n                    <div class="loading">\n                        <h2 style="text-align: center; color: #27ae60; margin-bottom: 20px;">Urakoze kwiyandikisha</h2>\n                        <p style="text-align: center;">Amakuru yawe yabitswe neza. Murakoze!</p>\n                    </div>\n                ',void(messagesEl.innerHTML="");contentEl[o(525)]=o(580)+selectedRecordbook[o(504)]+o(497)+n.map((e=>generateFieldHTML(e)))[o(563)]("")+'\n                    <button type="submit" class="btn btn-primary" style="width: 100%;">Ohereza amakuru yawe</button>\n                </form>\n            ',document[o(510)](o(483))[o(544)]("submit",(function(e){handleSubmit(e,!0)}))}function showSystemClosed(){contentEl[_0xf5dc68(525)]='\n                <div class="loading">\n                    <h2 style="text-align: center; color: #e74c3c; margin-bottom: 20px;">System closed</h2>\n                    <p style="text-align: center;">Mwihangane iyi systeme irafunze akakanya!</p>\n                </div>\n            ',messagesEl.innerHTML=""}function showErrorRetry(e){const o=_0xf5dc68;contentEl[o(525)]=o(546)}async function fetchWithRetry(e,o={},n=3){const t=_0xf5dc68;let r=0;for(;r<n;)try{const n=await fetch(e,o);if(n.ok)return await n.json();throw new Error(t(516)+n[t(512)])}catch(e){if(r++,r>=n)throw e;await new Promise((e=>setTimeout(e,1e3*r)))}}function showMessage(e,o){const n=_0xf5dc68;messagesEl[n(525)]=n(556)+e+'">'+o+"</div>"}function showLoading(e="Loading..."){const o=_0xf5dc68;contentEl.innerHTML=o(567)+e+o(566)}function showRetry(e){const o=_0xf5dc68;contentEl[o(525)]='\n                <div class="loading">\n                    <p>Mwongere mugerageze mukanya</p>\n                    <button class="btn btn-primary retry-btn" onclick="'+e+o(520)}async function loadRecordbooks(){const e=_0xf5dc68;messagesEl[e(525)]="",currentState="loading",showLoading(e(506));try{const o=await fetchWithRetry(API_BASE+e(515));o[e(512)]?(recordbooks=o.collections,currentState=e(476),showRecordbookSelection()):(currentState="error",showMessage(e(521),o[e(508)]||e(529)),showErrorRetry((()=>loadRecordbooks())))}catch(o){console[e(521)](e(535),o),currentState=e(521),showMessage(e(521),e(473)),showErrorRetry((()=>loadRecordbooks()))}}function showRecordbookSelection(){const e=_0xf5dc68;0!==recordbooks[e(530)]?contentEl[e(525)]=e(539)+recordbooks[e(541)]((o=>e(493)+o.collection_name[e(582)](/'/g,"\\'")+e(540)+o[e(504)]+e(569)))[e(563)]("")+e(570):contentEl[e(525)]='\n                    <div class="loading">\n                        <p>Systeme irafunze gerageza mukanya cya ubwire umuyobozi wawe!</p>\n                        <button class="btn btn-primary retry-btn" onclick="loadRecordbooks()">Gerageza mukanya</button>\n                    </div>\n                '}function selectRecordbook(e){const o=_0xf5dc68;messagesEl[o(525)]="",selectedRecordbook=recordbooks.find((n=>n[o(504)]===e)),selectedRecordbook?window[o(550)].hash=encodeURIComponent(e):showMessage(o(521),o(576))}function showForm(e=!1){const o=_0xf5dc68;currentState=o(573);const n=selectedRecordbook[o(545)];1e3!==e?e?contentEl[o(525)]=o(565):(contentEl[o(525)]='\n                <button class="btn btn-secondary back-btn" onclick="goBack()">← <pre>Hitamo aho kwiyandikisha</pre></button>\n                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">'+selectedRecordbook.collection_name+o(531)+n.map((e=>generateFieldHTML(e)))[o(563)]("")+'\n                    <button type="submit" class="btn btn-primary" style="width: 100%;">Ohereza amakuru yawe</button>\n                </form>\n            ',document.getElementById("recordForm")[o(544)](o(534),(function(e){handleSubmit(e,!1)}))):contentEl[o(525)]=o(478)}function generateFieldHTML(e){const o=_0xf5dc68,n=e[o(509)]?o(505):"",t=o(524)+e.field_name+n+o(477);switch(e[o(492)]){case o(471):return t+o(555)+e[o(469)]+o(485)+e[o(469)]+'" '+(e[o(509)]?"required":"")+"></textarea>\n                    </div>";case o(579):return t+'\n                        <div class="checkbox-group">\n                            <input type="checkbox" name="'+e[o(469)]+o(472)+(e.required?o(509):"")+">\n                            <span>"+e.field_name+o(553);case o(482):return e[o(511)]&&e[o(511)][o(530)]>0?t+o(494)+e[o(511)][o(541)]((n=>o(559)+e.field_name+o(501)+n+'" '+(e[o(509)]?"required":"")+o(560)+n+o(551)))[o(563)]("")+o(490):t+'\n                        <input type="text" class="form-input" name="'+e[o(469)]+o(485)+e[o(469)]+'" '+(e[o(509)]?o(509):"")+o(571);case"select":return e[o(511)]&&e[o(511)][o(530)]>0?t+o(479)+e[o(469)]+'" '+(e.required?o(509):"")+'>\n                                <option value="">Hitamo '+e[o(469)]+o(562)+e[o(511)].map((e=>o(537)+e+'">'+e+o(577))).join("")+o(542):t+o(547)+e[o(469)]+o(485)+e.field_name+'" '+(e.required?o(509):"")+">\n                    </div>";case"number":return t+'\n                        <input type="number" class="form-input" name="'+e.field_name+'" placeholder="Andika '+e[o(469)]+'" '+(e[o(509)]?o(509):"")+">\n                    </div>";case o(499):return t+o(533)+e[o(469)]+'" '+(e[o(509)]?"required":"")+o(571);default:return t+'\n                        <input type="'+e.input_type+o(532)+e[o(469)]+o(485)+e.field_name+'" '+(e[o(509)]?"required":"")+">\n                    </div>"}}async function handleSubmit(e,o=!1){const n=_0xf5dc68;e[n(496)](),messagesEl[n(525)]="";const t=e[n(581)],r=new FormData(t);let a=!0;if(selectedRecordbook[n(545)][n(498)]((e=>{const o=n;if(e.required){const n=r[o(487)](e[o(469)]);(!n||"string"==typeof n&&""===n[o(489)]())&&(a=!1,showMessage(o(521),'"'+e[o(469)]+'" ni ngombwa kuzuza!'))}})),!a)return;const s={};for(let[e,o]of r[n(495)]())o===n(527)?s[e]=!0:o===n(548)?s[e]=!1:isNaN(o)||""===o||""===o[n(489)]()?""===o[n(489)]()?s[e]=null:s[e]=o[n(489)]():s[e]=Number(o);e.target.querySelectorAll(n(491))[n(498)]((e=>{const o=n;!s[e[o(552)]]&&(s[e[o(552)]]=!1)})),showLoading(n(518));try{const r=await fetchWithRetry(API_BASE+n(574)+encodeURIComponent(selectedRecordbook[n(504)]),{method:n(470),headers:{"Content-Type":n(481)},body:JSON[n(513)]({record:s})});r[n(512)]?(showMessage(n(561),r[n(508)]||n(486)),e[n(581)].reset(),o?showSelfModeForm(!0):showForm(1e3)):(currentState="error",showMessage(n(521),r[n(508)]||n(473)),showErrorRetry((()=>{const e=n;showForm(),Object.keys(s)[e(498)]((o=>{const n=e,r=t[n(526)](n(523)+o+'"]');if(r)if(r.type===n(579))r.checked=!0===s[o];else if(r[n(536)]===n(482)){const e=t[n(526)]('[name="'+o+n(500)+s[o]+'"]');e&&(e.checked=!0)}else r[n(488)]=s[o]||""}))})))}catch(e){console.error(n(575),e),currentState=n(521),showMessage(n(521),n(473)),showErrorRetry((()=>{const e=n;showForm(),Object[e(480)](s)[e(498)]((o=>{const n=e,r=t.querySelector(n(523)+o+'"]');if(r)if("checkbox"===r[n(536)])r.checked=!0===s[o];else if("radio"===r[n(536)]){const e=t[n(526)]('[name="'+o+n(500)+s[o]+'"]');e&&(e[n(558)]=!0)}else r[n(488)]=s[o]||""}))}))}}function goBack(){const e=_0xf5dc68;selectedRecordbook=null,window.location[e(502)]="",loadRecordbooks()}document[_0xf5dc68(544)](_0xf5dc68(475),(()=>{const e=_0xf5dc68,o=window[e(550)][e(502)].substring(1);if(o){const n=o.split("/");"self"===n[0]&&2===n[e(530)]?loadRecordbooksForSelfMode(decodeURIComponent(n[1])):1===n[e(530)]?loadRecordbooksWithHash(decodeURIComponent(n[0])):loadRecordbooks()}else loadRecordbooks();window[e(544)]("hashchange",(()=>{location[e(528)]()}))}));
 </script>
</body>

</html>
